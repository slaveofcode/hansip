import{bz as g,bx as y,by as d,d as b,k as u,b5 as f,o as w,b as p,e as i,m as v,h,q as m}from"./index.d56ab597.js";g();const M=y("file",{actions:{async getFileGroupId(s){const t=await d.post("/internal/files/request-group",s);if(t.status===201){const{data:e}=t.data;return e.fgId}return null},async bundleFileGroup(s){const t=await d.post("/internal/files/bundle-group",s);if(t.status===201){const{data:e}=t.data;return{fgId:e.fgId,expiredAt:e.expiredAt,downloadUrl:e.downloadUrl}}return!1},async viewFiles(s){const t=await d.get(`/view/${s}`);if(t.status===200){const{isProtected:e,isNeedLogin:o,isAllowed:r,data:l}=t.data;return{isProtected:e,isNeedLogin:o,isAllowed:r,files:l.files}}return!1},async viewProtectedFiles(s,t){const e=await d.post(`/view/${s}`,{downloadPassword:t.pagePassword,accountPassword:t.accountPassword});if(e.status===200){const{data:o}=e.data;return{ok:!0,files:o.files}}return{ok:!1,message:e.data.message}},async downloadInfo(s,t){const e=await d.post(`/download/info/${s}`,{password:t});return e.status===200?[!0,e.data]:[!1,null]},async downloadFiles(s,t){const e=await d.post(`/download/do/${s}`,{downloadPassword:t.pagePassword,accountPassword:t.accountPassword},{responseType:"blob"});let o="files.zip";if(e.headers["content-disposition"]&&e.headers["content-disposition"].indexOf("attachment")!==-1){var r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,l=r.exec(e.headers["content-disposition"]);l!=null&&l[1]&&(o=l[1].replace(/['"]/g,""))}const a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",o),document.body.appendChild(n),n.click()}}}),x={key:0,class:"text-gray-700 fixed inset-0 w-full h-screen flex items-center justify-center bg-gray-500/75"},_={class:"max-w-2xl bg-white shadow-lg rounded-lg py-5 px-8"},C={class:"relative bg-white"},k=["onClick"],P={class:"pt-2"},F=b({__name:"Modal",props:{show:{type:Boolean,default:!1},noCloseButton:{type:Boolean,default:!1}},emits:["onModalClose","onModalClosed"],setup(s,{emit:t}){const e=s,o=u(e.show),r=u(e.noCloseButton);f(()=>e.show,a=>{a!==o.value&&(o.value=a)}),f(o,a=>{var n,c;if(a)return(n=document.querySelector("body"))==null?void 0:n.classList.add("overflow-hidden");(c=document.querySelector("body"))==null||c.classList.remove("overflow-hidden")});const l=()=>{t("onModalClose"),o.value=!1,t("onModalClosed")};return(a,n)=>o.value?(w(),p("div",x,[i("div",_,[i("div",C,[r.value?h("",!0):(w(),p("button",{key:0,"aria-label":"close",class:"absolute -top-3 -right-5 text-xl text-gray-500",onClick:v(l,["prevent"])},"\xD7",8,k))]),i("div",P,[m(a.$slots,"default")])])])):h("",!0)}});export{F as _,M as u};
